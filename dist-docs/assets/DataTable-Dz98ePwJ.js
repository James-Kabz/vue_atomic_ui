import{_ as Ve,e as C,l as d,M as p,N as R,f as I,c as i,d as b,g as m,a as o,h as U,w as h,D as S,n as u,F as L,b as V,t as $,V as Pe,L as W,v as Te,i as _,o as s}from"./index-GxWqBnN7.js";import Le from"./Checkbox-I7i784PT.js";import ze from"./DataTableHeader-BeOTCZSQ.js";import Ae from"./DataTableRow-Cv90MCtO.js";import De from"./DataTableToolBar-BUcT5K2G.js";import je from"./DataTablePagination-ox8GyMEE.js";import K from"./Loader-BXlGcE_d.js";import Re from"./Button-BeNwfNW8.js";import Oe from"./Tooltip-ypiwBQLb.js";import Me from"./Modal-CINFEKg1.js";import"./Typography-Dbut3QiO.js";import"./DataTableCell-DA_zjLZ3.js";import"./Label-DhE62FJ2.js";const Ne={class:"relative"},Ie={class:"flex items-center justify-center"},Ue=["onClick"],Ke={class:"flex items-center gap-2"},Fe={key:1,class:"flex flex-col"},qe=["onClick"],Ee={key:1},He={key:1,class:"flex items-center gap-1 justify-center"},Ge={key:1,class:"text-xs"},Je={key:2},Qe=["colspan"],Xe={class:"flex flex-col items-center justify-center py-12"},Ye={class:"ui-text mb-4 flex justify-center"},Ze={class:"ui-text text-lg font-medium mb-2"},We={class:"ui-text text-sm"},_e={class:"p-6"},et={class:"text-xl font-bold ui-text whitespace-pre-wrap wrap-break-word"},tt={__name:"DataTable",props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},title:{type:String,default:null},description:{type:String,default:null},selectable:{type:Boolean,default:!1},selectedItems:{type:Array,default:()=>[]},sortBy:{type:String,default:null},sortOrder:{type:String,default:"asc",validator:a=>["asc","desc"].includes(a)},pageSize:{type:Number,default:10},showPagination:{type:Boolean,default:!0},striped:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!0},clickableRows:{type:Boolean,default:!1},emptyText:{type:String,default:"No data available"},emptySubtitle:{type:String,default:"Try adjusting your search or filter criteria"},rowKey:{type:String,default:"id"},variant:{type:String,default:"default",validator:a=>["default","bordered","minimal"].includes(a)},density:{type:String,default:"normal",validator:a=>["compact","normal","comfortable"].includes(a)},headerVariant:{type:String,default:"default"},headerPadding:{type:String,default:"normal"},paginationVariant:{type:String,default:"default"},paginationPadding:{type:String,default:"normal"},actions:{type:Array,default:()=>[]},showActionsColumn:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},dataLoading:{type:Boolean,default:!1},sortLoading:{type:Boolean,default:!1},paginationLoading:{type:Boolean,default:!1},bulkLoading:{type:Boolean,default:!1},rowLoading:{type:Object,default:()=>({})},loadingType:{type:String,default:"dots",validator:a=>["spin","pulse","bounce","ripple","bars","dots","ring"].includes(a)},loadingSize:{type:String,default:"medium",validator:a=>["small","medium","large","xl"].includes(a)},loadingColor:{type:String,default:"#3b82f6"},loadingText:{type:String,default:"Loading..."},loadingTextPosition:{type:String,default:"bottom",validator:a=>["top","bottom"].includes(a)},loadingBackground:{type:String,default:"rgba(255, 255, 255, 0.95)"},showSkeleton:{type:Boolean,default:!0},skeletonRows:{type:Number,default:5},showToolbar:{type:Boolean,default:!1},showDensityToggle:{type:Boolean,default:!0},showColumnToggle:{type:Boolean,default:!0},showRefresh:{type:Boolean,default:!0}},emits:["selection-change","sort-change","row-click","page-change","page-size-change","refresh","action","update:density","toggle-column"],setup(a,{expose:ee,emit:te}){const n=a,f=te,P=C(1),B=C(n.pageSize),x=C(n.columns.map(e=>e.key)),k=C(n.sortBy),w=C(n.sortOrder),z=C(!1),A=C(""),ae=R(" border ui-border-strong  rounded-lg relative",{variants:{variant:{default:"shadow-sm ui-border-strong",bordered:"border-2 ui-border-strong",minimal:"border-none ui-border-strong shadow-none bg-transparent"}},defaultVariants:{variant:"default"}}),ne=R("min-w-full",{variants:{variant:{default:"divide-y divide-(--ui-border-strong)",bordered:"border-collapse [&_td]:border [&_th]:border [&_td]:border-(--ui-border-strong) [&_th]:border-(--ui-border-strong)",minimal:"divide-y divide-(--ui-border-strong)"}},defaultVariants:{variant:"default"}}),le=R("",{variants:{variant:{default:" border-b border-(--ui-border-strong)",bordered:" border-b-2 border-(--ui-border-strong)",minimal:"bg-transparent border-b border-(--ui-border-strong)"}},defaultVariants:{variant:"default"}}),se=R("divide-y",{variants:{variant:{default:" divide-(--ui-border-strong)",bordered:" divide-(--ui-border-strong)",minimal:"bg-transparent divide-(--ui-border-strong)"}},defaultVariants:{variant:"default"}}),v=d(()=>{let e=[...n.data];if(k.value){const t=n.columns.find(l=>l.key===k.value);t&&e.sort((l,y)=>{const g=M(l,t),c=M(y,t);return g<c?w.value==="asc"?-1:1:g>c?w.value==="asc"?1:-1:0})}return e}),F=d(()=>Math.ceil(v.value.length/B.value)),q=d(()=>{if(!n.showPagination)return v.value;const e=(P.value-1)*B.value,t=e+B.value;return v.value.slice(e,t)}),D=d(()=>n.columns.filter(e=>x.value.includes(e.key))),oe=d(()=>n.columns.filter(e=>e.toggleable!==!1)),ie=(e,t)=>{t?x.value.includes(e)||x.value.push(e):x.value=x.value.filter(l=>l!==e),f("toggle-column",{key:e,visible:t})},O=d(()=>n.showActionsColumn?n.$slots?.actions?!0:!n.actions||n.actions.length===0?!1:n.actions.some(t=>t.permission===void 0?!0:typeof t.permission=="boolean"?t.permission===!0:typeof t.permission=="function"):!1),re=d(()=>{let e=n.columns.length;return n.selectable&&e++,O.value&&e++,e}),de=e=>n.actions.filter(t=>{if(t.permission!==void 0){if(typeof t.permission=="function"){if(!t.permission(e))return!1}else if(!t.permission)return!1}return t.visible&&typeof t.visible=="function"?t.visible(e):!0}),E=(e,t)=>e.permission&&typeof e.permission=="function"?e.permission(t):!0,H=(e,t)=>e.disabled&&typeof e.disabled=="function"?e.disabled(t):!1,ue=(e,t)=>{H(e,t)||!E(e,t)||(f("action",{action:e.key,item:t,actionConfig:e}),e.onClick&&typeof e.onClick=="function"&&e.onClick(t))},ce=e=>({default:"default",primary:"gradient",secondary:"secondary",danger:"danger",success:"success",warning:"warning",info:"info",subtle:"subtle",dark:"dark",light:"light",primaryOutline:"primaryOutline",dangerOutline:"dangerOutline",successOutline:"successOutline",outline:"outline",link:"link",ghost:"ghost"})[e]||"ghost",G=d(()=>v.value.length>0&&v.value.every(e=>N(e))),ge=d(()=>{const e=v.value.filter(t=>N(t)).length;return e>0&&e<v.value.length}),M=(e,t)=>t.accessor?t.accessor(e):t.key.split(".").reduce((l,y)=>l?.[y],e),T=(e,t)=>e[n.rowKey]||t,N=e=>n.selectedItems.some(t=>T(t)===T(e)),fe=e=>{const t=[...n.selectedItems],l=t.findIndex(y=>T(y)===T(e));l>-1?t.splice(l,1):t.push(e),f("selection-change",t)},J=()=>{if(n.loading||n.dataLoading)return;const e=G.value?[]:[...v.value];f("selection-change",e)},ye=async e=>{!e.sortable||n.loading||n.sortLoading||(k.value===e.key?w.value=w.value==="asc"?"desc":"asc":(k.value=e.key,w.value="asc"),f("sort-change",{column:e.key,direction:w.value}))},me=e=>{n.loading||f("row-click",e)},Q=async e=>{n.paginationLoading||n.loading||(P.value=e,f("page-change",e))},ve=async e=>{n.paginationLoading||n.loading||(B.value=e,P.value=1,f("page-size-change",e))},pe=d(()=>p(ae({variant:n.variant}))),be=d(()=>p(ne({variant:n.variant}))),he=d(()=>p(le({variant:n.variant}))),ke=d(()=>p(se({variant:n.variant}))),we=e=>p({compact:"px-4 py-2",normal:"px-6 py-3",comfortable:"px-8 py-4"}[n.density],"text-left text-sm font-extrabold ui-text uppercase tracking-wider",{"cursor-pointer hover:bg-(--ui-surface) transition-colors":e.sortable&&!n.loading&&!n.sortLoading,"cursor-not-allowed opacity-50":n.loading||n.sortLoading&&k.value===e.key}),xe=()=>p({compact:"px-4 py-2",normal:"px-6 py-4",comfortable:"px-8 py-6"}[n.density],"whitespace-nowrap text-sm ui-text"),j=(e,t)=>{const l=M(e,t);return typeof t=="object"&&t.formatter?t.formatter(l,e):l==null?"":l instanceof Date?l.toLocaleDateString():Array.isArray(l)?l.join(", "):l},Ce=(e,t=10)=>{if(!e)return e;const l=e.toString().split(" ");return l.length<=t?e:l.slice(0,t).join(" ")+"..."},Se=e=>{A.value||(A.value=e,z.value=!0)},$e=()=>{z.value=!1,A.value=""},X=d(()=>p({compact:"px-4 py-2",normal:"px-6 py-4",comfortable:"px-8 py-6"}[n.density],"whitespace-nowrap text-sm ui-text w-12")),Y=d(()=>p({compact:"px-4 py-2",normal:"px-6 py-4",comfortable:"px-8 py-6"}[n.density],"whitespace-nowrap text-md font-extrabold text-center")),Be=d(()=>p({compact:"px-4 py-4",normal:"px-6 py-6",comfortable:"px-8 py-8"}[n.density],"text-center")),Z=(e,t)=>p({"ui-primary":k.value===e.key&&w.value===t,"ui-text":k.value!==e.key||w.value!==t});return I(()=>n.selectedItems,()=>{},{deep:!0}),I(()=>n.pageSize,e=>{B.value=e}),I(()=>n.columns,e=>{x.value=e.map(t=>t.key)},{deep:!0}),ee({refresh:()=>{f("refresh")},goToPage:e=>{Q(e)},selectAll:()=>{J()},clearSelection:()=>{f("selection-change",[])},getCurrentPage:()=>P.value,getTotalPages:()=>F.value,getSelectedItems:()=>n.selectedItems}),(e,t)=>(s(),i("div",{class:u(pe.value)},[a.title||a.description||e.$slots.header?(s(),b(ze,{key:0,title:a.title,description:a.description,variant:a.headerVariant,padding:a.headerPadding},{header:h(()=>[S(e.$slots,"header",{},void 0,!0)]),filters:h(()=>[S(e.$slots,"filters",{},void 0,!0)]),_:3},8,["title","description","variant","padding"])):m("",!0),a.showToolbar?(s(),b(De,{key:1,"selected-items":a.selectedItems,"total-items":v.value.length,"show-density-toggle":a.showDensityToggle,"show-column-toggle":a.showColumnToggle,"show-refresh":a.showRefresh,density:a.density,"toggleable-columns":oe.value,"visible-columns":x.value,"onUpdate:density":t[0]||(t[0]=l=>f("update:density",l)),onToggleColumn:ie,onRefresh:t[1]||(t[1]=l=>e.$emit("refresh"))},{actions:h(()=>[S(e.$slots,"toolbar-actions",{},void 0,!0)]),_:3},8,["selected-items","total-items","show-density-toggle","show-column-toggle","show-refresh","density","toggleable-columns","visible-columns"])):m("",!0),o("div",Ne,[a.loading?(s(),b(K,{key:0,loading:!0,type:a.loadingType,size:a.loadingSize,color:a.loadingColor,overlay:!0,text:a.loadingText,"text-position":a.loadingTextPosition,"background-color":a.loadingBackground,class:"table-loading-overlay"},null,8,["type","size","color","text","text-position","background-color"])):m("",!0),o("div",{class:u(["overflow-x-auto",{"opacity-50":a.loading}])},[o("table",{class:u(be.value)},[o("thead",{class:u(he.value)},[o("tr",null,[a.selectable?(s(),i("th",{key:0,class:u(X.value)},[o("div",Ie,[a.bulkLoading?(s(),b(K,{key:0,loading:!0,type:"spin",size:"small",color:a.loadingColor},null,8,["color"])):(s(),b(Le,{key:1,"model-value":G.value,indeterminate:ge.value,disabled:a.loading||a.dataLoading,"onUpdate:modelValue":J},null,8,["model-value","indeterminate","disabled"]))])],2)):m("",!0),(s(!0),i(L,null,V(D.value,l=>(s(),i("th",{key:l.key,class:u(we(l)),onClick:y=>ye(l)},[o("div",Ke,[o("span",null,$(l.label),1),a.sortLoading&&k.value===l.key?(s(),b(K,{key:0,loading:!0,type:"spin",size:"small",color:a.loadingColor},null,8,["color"])):l.sortable?(s(),i("div",Fe,[(s(),i("svg",{class:u([Z(l,"asc"),"w-3 h-3 transition-colors"]),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[3]||(t[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)])],2)),(s(),i("svg",{class:u([Z(l,"desc"),"w-3 h-3 transition-colors"]),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[4]||(t[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)])],2))])):m("",!0)])],10,Ue))),128)),O.value?(s(),i("th",{key:1,class:u(Y.value)}," Actions ",2)):m("",!0)])],2),o("tbody",{class:u(ke.value)},[a.showSkeleton&&(a.loading||a.dataLoading)?(s(!0),i(L,{key:0},V(a.skeletonRows,l=>(s(),i("tr",{key:`skeleton-${l}`,class:"animate-pulse"},[a.selectable?(s(),i("td",{key:0,class:u(X.value)},[...t[5]||(t[5]=[o("div",{class:"w-4 h-4 ui-bg rounded"},null,-1)])],2)):m("",!0),(s(!0),i(L,null,V(D.value,y=>(s(),i("td",{key:y.key,class:u(xe())},[...t[6]||(t[6]=[o("div",{class:"h-4 ui-bg rounded w-3/4"},null,-1)])],2))),128)),O.value?(s(),i("td",{key:1,class:u(Y.value)},[...t[7]||(t[7]=[o("div",{class:"flex gap-2 justify-center"},[o("div",{class:"w-6 h-6 ui-surface rounded"}),o("div",{class:"w-6 h-6 ui-surface rounded"})],-1)])],2)):m("",!0)]))),128)):q.value.length>0?(s(!0),i(L,{key:1},V(q.value,(l,y)=>(s(),b(Ae,{key:T(l,y),item:l,columns:D.value,index:y,selectable:a.selectable,"is-selected":N(l),striped:a.striped,hoverable:a.hoverable,"clickable-rows":a.clickableRows,density:a.density,variant:a.variant,onToggleSelection:fe,onRowClick:me},Pe({actions:h(({item:g,index:c})=>[e.$slots.actions?S(e.$slots,"actions",{key:0,item:g,index:c},void 0,!0):a.actions.length>0?(s(),i("div",He,[(s(!0),i(L,null,V(de(g),r=>(s(),b(Oe,{key:r.key,content:typeof r.tooltip=="function"?r.tooltip(g):r.tooltip||r.label||r.key,placement:"top"},{default:h(()=>[U(Re,{variant:ce(r.variant),size:"xs",disabled:H(r,g)||!E(r,g),class:u(["h-8 w-8",typeof r.class=="function"?r.class(g):r.class]),onClick:W(at=>ue(r,g),["stop"])},{default:h(()=>[r.icon?(s(),b(_,{key:0,icon:r.icon,class:"w-4 h-4"},null,8,["icon"])):r.label?(s(),i("span",Ge,$(r.label),1)):m("",!0)]),_:2},1032,["variant","disabled","class","onClick"])]),_:2},1032,["content"]))),128))])):m("",!0)]),_:2},[V(D.value,g=>({name:`cell-${g.key}`,fn:h(c=>[S(e.$slots,`cell-${g.key}`,Te({ref_for:!0},c),()=>[j(c.item,c.column).toString().split(" ").length>10?(s(),i("span",{key:0,class:"cursor-pointer ui-primary hover:text-(--ui-primary)",onClick:W(r=>Se(j(c.item,c.column)),["stop"])},$(Ce(j(c.item,c.column))),9,qe)):(s(),i("span",Ee,$(j(c.item,c.column)),1))],!0)])}))]),1032,["item","columns","index","selectable","is-selected","striped","hoverable","clickable-rows","density","variant"]))),128)):(s(),i("tr",Je,[o("td",{colspan:re.value,class:u(Be.value)},[S(e.$slots,"empty",{},()=>[o("div",Xe,[o("div",Ye,[U(_,{icon:"search",class:"w-16 h-16"})]),o("p",Ze,$(a.emptyText),1),o("p",We,$(a.emptySubtitle),1)])],!0)],10,Qe)]))],2)],2)],2)]),a.showPagination||e.$slots.footer?(s(),b(je,{key:2,"current-page":P.value,"total-pages":F.value,total:v.value.length,"page-size":B.value,"show-pagination":a.showPagination,selectable:a.selectable,"selected-count":a.selectedItems.length,variant:a.paginationVariant,padding:a.paginationPadding,loading:a.paginationLoading,disabled:a.loading||a.dataLoading,"onUpdate:currentPage":Q,"onUpdate:pageSize":ve},{footer:h(()=>[S(e.$slots,"footer",{},void 0,!0)]),_:3},8,["current-page","total-pages","total","page-size","show-pagination","selectable","selected-count","variant","padding","loading","disabled"])):m("",!0),U(Me,{modelValue:z.value,"onUpdate:modelValue":t[2]||(t[2]=l=>z.value=l),size:"lg",onClose:$e},{default:h(()=>[o("div",_e,[t[8]||(t[8]=o("h3",{class:"text-md font-semibold mb-4"}," Full Text ",-1)),o("div",et,$(A.value),1)])]),_:1},8,["modelValue"])],2))}},vt=Ve(tt,[["__scopeId","data-v-6f4e0bda"]]);export{vt as default};
