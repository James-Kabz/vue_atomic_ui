import{e as E,l as c,c as s,o as i,g as h,a as n,F as y,b,n as k,t as g,E as M}from"./index-GxWqBnN7.js";const T={class:"ui-surface w-full h-full relative"},X=["width","height","viewBox"],I={key:0},p=["x1","y1","x2","y2","stroke"],D=["id"],F=["stop-color"],H=["stop-color"],W=["x","y","width","height","fill","onMouseenter","onClick"],j=["to"],q=["from","to"],O={key:1},J=["x","y"],K={key:2},P=["x","y"],Q={key:3},R=["x","y"],U={key:4},Z=["x"],_=["x1","y1","x2","y2"],tt=["x1","y1","x2","y2"],et={class:"ui--surface ui-text px-4 py-3 rounded-lg shadow-2xl border ui-border-strong min-w-40"},at={class:"flex items-center gap-2 mb-1"},lt={class:"font-semibold text-sm"},ot={class:"ml-5"},st={class:"text-2xl font-bold"},nt={__name:"BarChart",props:{data:{type:Array,required:!0},labels:{type:Array,default:()=>[]},colors:{type:Array,default:()=>["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"]},width:{type:Number,default:400},height:{type:Number,default:300},padding:{type:Object,default:()=>({top:20,right:20,bottom:60,left:60})},showGrid:{type:Boolean,default:!0},showXAxis:{type:Boolean,default:!0},showYAxis:{type:Boolean,default:!0},gridColor:{type:String,default:"#e5e7eb"},barClasses:{type:String,default:"transition-all duration-200 hover:opacity-90 cursor-pointer"},axisLabelClasses:{type:String,default:"fill-(--ui-text) text-xs font-medium"},maxValue:{type:Number,default:null},xAxisLabel:{type:String,default:""},yAxisLabel:{type:String,default:""}},emits:["bar-click","bar-hover"],setup(t,{emit:N}){const a=t,w=N,d=E({visible:!1,x:0,y:0,label:"",value:0,color:""}),f=c(()=>a.maxValue||Math.max(...a.data)),u=c(()=>a.height-a.padding.top-a.padding.bottom),x=c(()=>a.width-a.padding.left-a.padding.right),m=c(()=>x.value/a.data.length*.7),C=c(()=>x.value/a.data.length*.3),A=c(()=>{const l=[];for(let e=0;e<=5;e++){const o=a.padding.top+u.value/5*e;l.push(o)}return l}),B=l=>a.padding.left+l*(m.value+C.value)+C.value/2,$=l=>{const r=u.value/f.value;return a.padding.top+u.value-l*r},L=l=>{const r=u.value/f.value;return l*r},v=l=>a.colors[l%a.colors.length],z=l=>{const r=(a.height-a.padding.bottom-l)/u.value*f.value;return Math.round(r)},G=(l,r,e)=>{const o=a.labels[e]||`Item ${e+1}`;d.value={visible:!0,x:l.clientX,y:l.clientY,label:o,value:r,color:v(e)},w("bar-hover",{value:r,index:e,label:o})},V=()=>{d.value.visible=!1},Y=(l,r)=>{const e=a.labels[r]||`Item ${r+1}`;w("bar-click",{value:l,index:r,label:e})};return(l,r)=>(i(),s("div",T,[(i(),s("svg",{width:t.width,height:t.height,viewBox:`0 0 ${t.width} ${t.height}`,class:"overflow-visible"},[t.showGrid?(i(),s("g",I,[(i(!0),s(y,null,b(A.value,e=>(i(),s("line",{key:`grid-${e}`,x1:t.padding.left,y1:e,x2:t.width-t.padding.right,y2:e,stroke:t.gridColor,"stroke-width":"1","stroke-dasharray":"4,4",opacity:"0.3"},null,8,p))),128))])):h("",!0),n("defs",null,[(i(!0),s(y,null,b(t.data,(e,o)=>(i(),s("linearGradient",{id:`barGradient-${o}`,key:`gradient-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[n("stop",{offset:"0%","stop-color":v(o),"stop-opacity":"1"},null,8,F),n("stop",{offset:"100%","stop-color":v(o),"stop-opacity":"0.7"},null,8,H)],8,D))),128))]),n("g",null,[(i(!0),s(y,null,b(t.data,(e,o)=>(i(),s("rect",{key:`bar-${o}`,x:B(o),y:$(e),width:m.value,height:L(e),fill:`url(#barGradient-${o})`,class:k(t.barClasses),rx:"4",onMouseenter:S=>G(S,e,o),onMouseleave:V,onClick:S=>Y(e,o)},[n("animate",{attributeName:"height",from:0,to:L(e),dur:"0.8s",fill:"freeze"},null,8,j),n("animate",{attributeName:"y",from:t.padding.top+u.value,to:$(e),dur:"0.8s",fill:"freeze"},null,8,q)],42,W))),128))]),t.showXAxis?(i(),s("g",O,[(i(!0),s(y,null,b(t.labels,(e,o)=>(i(),s("text",{key:`xlabel-${o}`,x:B(o)+m.value/2,y:t.height-t.padding.bottom+20,class:k(t.axisLabelClasses),"text-anchor":"middle"},g(e),11,J))),128))])):h("",!0),t.xAxisLabel?(i(),s("g",K,[n("text",{x:t.padding.left+x.value/2,y:t.height-10,class:"fill-(--ui-text) text-sm font-semibold","text-anchor":"middle"},g(t.xAxisLabel),9,P)])):h("",!0),t.showYAxis?(i(),s("g",Q,[(i(!0),s(y,null,b(A.value,e=>(i(),s("text",{key:`ylabel-${e}`,x:t.padding.left-10,y:e+4,class:k(t.axisLabelClasses),"text-anchor":"end"},g(z(e)),11,R))),128))])):h("",!0),t.yAxisLabel?(i(),s("g",U,[n("text",{x:-(t.padding.top+u.value/2),y:15,class:"fill-(--ui-text) text-sm font-semibold","text-anchor":"middle",transform:"rotate(-90)"},g(t.yAxisLabel),9,Z)])):h("",!0),n("line",{x1:t.padding.left,y1:t.padding.top,x2:t.padding.left,y2:t.height-t.padding.bottom,stroke:"#cbd5e1","stroke-width":"2"},null,8,_),n("line",{x1:t.padding.left,y1:t.height-t.padding.bottom,x2:t.width-t.padding.right,y2:t.height-t.padding.bottom,stroke:"#cbd5e1","stroke-width":"2"},null,8,tt)],8,X)),d.value.visible?(i(),s("div",{key:0,style:M({position:"fixed",left:`${d.value.x}px`,top:`${d.value.y}px`,transform:"translate(-50%, -120%)",pointerEvents:"none",zIndex:9999}),class:"ui-surface-strong animate-in fade-in duration-200"},[n("div",et,[n("div",at,[n("div",{style:M({backgroundColor:d.value.color}),class:"w-3 h-3 rounded shadow-sm"},null,4),n("p",lt,g(d.value.label),1)]),n("div",ot,[n("span",st,g(d.value.value)+"%",1)]),r[0]||(r[0]=n("div",{class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 ui-surface border-r border-b ui-border-strong"},null,-1))])],4)):h("",!0)]))}};export{nt as default};
