import{f as p,k as I,x as N,S as T,g as k,c as n,o as l,a as d,d as V,t as w,F as C,b as L,w as E,e as M,n as m,h as O,q as D,C as K,I as q,K as H,N as R,T as A,W as F,Y as U}from"./index-swU1CFca.js";import P from"./Badge-BJJ0MFkX.js";const Q={class:"relative"},W=["id","disabled"],Y={key:0,class:"ui-text"},j={key:1,class:"flex flex-wrap gap-1.5"},G={class:"px-3 py-2.5 border-b ui-border-strong ui-surface-muted"},J={key:0,class:"max-h-52 overflow-y-auto py-1"},X=["onClick"],Z={class:"flex items-center gap-3"},ee=["checked"],te={key:1,class:"px-4 py-6 text-sm ui-text text-center"},le={__name:"MultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,required:!0,validator:s=>s.every(v=>v.value!==void 0&&v.label)},id:{type:String,default:null},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Select options"},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:v}){const a=s,S=v,r=p(!1),u=p(""),b=p(null),i=p([...a.options]),f=p(null),y=p({}),g=I(()=>a.options.filter(e=>a.modelValue.includes(e.value)).map(e=>e.label)),c=()=>{if(!f.value)return;const e=f.value.getBoundingClientRect(),t=window.innerHeight,o=t-e.bottom,h=320;o<h&&e.top>h?y.value={position:"fixed",bottom:`${t-e.top+4}px`,left:`${e.left}px`,width:`${e.width}px`,zIndex:9999}:y.value={position:"fixed",top:`${e.bottom+4}px`,left:`${e.left}px`,width:`${e.width}px`,zIndex:9999}},_=()=>{a.disabled||(r.value=!r.value,r.value?(c(),U(()=>{b.value?.focus()})):(u.value="",i.value=[...a.options]))},B=e=>{let t;a.modelValue.includes(e)?t=a.modelValue.filter(o=>o!==e):t=[...a.modelValue,e],S("update:modelValue",t)},z=()=>{if(!u.value.trim())i.value=[...a.options];else{const e=u.value.toLowerCase();i.value=a.options.filter(t=>t.label.toLowerCase().includes(e))}},$=e=>{e.key==="Escape"&&(r.value=!1,u.value="",i.value=[...a.options])},x=e=>{if(!f.value)return;const t=e.target;t&&!f.value.contains(t)&&!t.closest("[data-multiselect-dropdown]")&&(r.value=!1,u.value="",i.value=[...a.options])};return N(()=>{document.addEventListener("click",x),window.addEventListener("scroll",c,!0),window.addEventListener("resize",c)}),T(()=>{document.removeEventListener("click",x),window.removeEventListener("scroll",c,!0),window.removeEventListener("resize",c)}),k(()=>a.options,e=>{i.value=[...e]},{immediate:!0}),k(r,e=>{e&&c()}),(e,t)=>(l(),n("div",Q,[d("button",{id:s.id,ref_key:"buttonRef",ref:f,type:"button",disabled:s.disabled,class:m(["w-full px-3 py-2.5 text-left border rounded-md focus:outline-none focus:ring-2 focus:ring-(--ui-primary) ui-surface  min-h-[42px]",s.hasError?"border-(--ui-danger)":"ui-border-strong ",s.disabled?"ui-surface-muted cursor-not-allowed opacity-50":"hover:border-(--ui-border-strong)"]),onClick:_,onKeydown:$},[g.value.length===0?(l(),n("div",Y,w(s.placeholder||"Select options"),1)):(l(),n("div",j,[(l(!0),n(C,null,L(g.value,o=>(l(),V(P,{key:o,variant:"primary",size:"sm"},{default:E(()=>[M(w(o),1)]),_:2},1024))),128))])),(l(),n("svg",{class:m(["absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 ui-text pointer-events-none transition-transform duration-200",{"rotate-180":r.value}]),fill:"currentColor",viewBox:"0 0 20 20"},[...t[2]||(t[2]=[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2))],42,W),(l(),V(F,{to:"body"},[O(A,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:E(()=>[r.value?(l(),n("div",{key:0,style:K(y.value),"data-multiselect-dropdown":"",class:"shadow-lg max-h-72 rounded-md text-base ring-1 ring-(----ui-bg) ring-opacity-5 overflow-hidden focus:outline-none"},[d("div",G,[q(d("input",{ref_key:"searchInput",ref:b,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),type:"text",placeholder:"Search options...",class:"w-full px-3 py-2 text-sm border ui-border-strong rounded-md focus:outline-none focus:ring-2 focus:ring-(--ui-primary) focus:border-transparent ui-surface",onInput:z,onKeydown:t[1]||(t[1]=H(()=>{},["stop"]))},null,544),[[R,u.value]])]),i.value.length>0?(l(),n("div",J,[(l(!0),n(C,null,L(i.value,o=>(l(),n("button",{key:o.value,type:"button",class:m(["cursor-pointer select-none relative py-2.5 pl-3 pr-9 w-full text-left hover:bg-(--ui-primary-soft) focus:bg-(--ui-primary-soft) focus:outline-none transition-colors duration-150",{"ui-primary-soft":s.modelValue.includes(o.value)}]),onClick:h=>B(o.value)},[d("div",Z,[d("input",{type:"checkbox",checked:s.modelValue.includes(o.value),class:"h-4 w-4 ui-primary focus:ring-(--ui-primary) ui-border-strong rounded cursor-pointer pointer-events-none",readonly:"",tabindex:"-1"},null,8,ee),d("span",{class:m(["block font-normal truncate",{"ui-primary font-medium":s.modelValue.includes(o.value)}])},w(o.label),3)])],10,X))),128))])):(l(),n("div",te," No options found "))],4)):D("",!0)]),_:1})]))]))}};export{le as default};
