import{f as h,k as x,L as y,M as z,x as U,S as q,g as O,c as o,o as l,a as v,h as g,q as u,n as p,w as X,F as Z,b as G,d as J,v as P,t as b,B as Q,T as W,H as c}from"./index-swU1CFca.js";const Y={class:"relative"},ee={class:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none"},te=["value","placeholder","disabled"],ae={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},se=["aria-label"],le={key:1,class:"animate-spin"},oe={key:0,class:"max-h-64 overflow-y-auto"},ne=["onClick","onMouseenter"],re={class:"flex-1 text-left"},ue={class:"font-medium ui-text"},ie={key:0,class:"text-sm ui-text truncate"},ce={key:1,class:"text-xs ui-text ml-3"},de={key:1,class:"px-4 py-3 text-sm ui-text text-center"},fe={key:2,class:"border-t ui-border-strong p-2"},ve={__name:"Search",props:{modelValue:{type:String,default:""},results:{type:Array,default:()=>[]},placeholder:{type:String,default:"Search..."},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},clearLabel:{type:String,default:"Clear search"},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)},debounce:{type:Number,default:300},minLength:{type:Number,default:1},showNoResults:{type:Boolean,default:!0},noResultsText:{type:String,default:"No results found"},highlightMatches:{type:Boolean,default:!0}},emits:["update:modelValue","search","select","clear","focus","blur"],setup(t,{emit:R}){const M={render(){return c("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}},S={render(){return c("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}},L={render(){return c("svg",{fill:"none",viewBox:"0 0 24 24",class:"animate-spin"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])}},a=t,i=R,k=h(null),w=h(null),n=h(!1),s=h(-1),f=h(null),N=e=>{const d=e.target.value;i("update:modelValue",d),f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{d.length>=a.minLength?(i("search",d),n.value=!0):n.value=!1},a.debounce)},T=e=>{i("focus",e),a.modelValue.length>=a.minLength&&(n.value=!0)},D=e=>{i("blur",e),setTimeout(()=>{n.value=!1,s.value=-1},150)},E=()=>{i("update:modelValue",""),i("clear"),n.value=!1,w.value?.focus()},C=e=>{i("select",e),n.value=!1,s.value=-1},I=e=>{if(!(!n.value||a.results.length===0))switch(e.key){case"ArrowDown":e.preventDefault(),s.value=Math.min(s.value+1,a.results.length-1);break;case"ArrowUp":e.preventDefault(),s.value=Math.max(s.value-1,-1);break;case"Enter":e.preventDefault(),s.value>=0&&C(a.results[s.value]);break;case"Escape":e.preventDefault(),n.value=!1,s.value=-1;break}},V=e=>{if(!a.highlightMatches||!a.modelValue||!e)return e;const d=new RegExp(`(${a.modelValue})`,"gi");return e.replace(d,"$1")},$=z("block w-full rounded-lg border ui-surface  transition-colors duration-200 placeholder:text-(--ui-text) disabled:bg-(--ui-surface) disabled:text-(--ui-text) disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-(--ui-primary) focus:border-(--ui-primary)",{variants:{size:{sm:"px-9 py-1.5 text-sm",md:"px-10 py-2 text-sm",lg:"px-12 py-3 text-base"}},defaultVariants:{size:"md"}}),A=z("ui-text",{variants:{size:{sm:"w-4 h-4",md:"w-4 h-4",lg:"w-5 h-5"}},defaultVariants:{size:"md"}}),_=x(()=>y($({size:a.size}))),F=x(()=>y(A({size:a.size}))),j=x(()=>y("absolute z-50 w-full mt-1 ui-surface  rounded-lg shadow-lg border ui-border-strong  max-h-96 overflow-hidden")),H=e=>y("flex items-center w-full px-4 py-3 text-left transition-colors duration-150 hover:bg-(--ui-surface) focus:bg-(--ui-surface) focus:outline-none",{"ui-surface-muted":s.value===e}),B=e=>{k.value&&!k.value.contains(e.target)&&(n.value=!1,s.value=-1)};return U(()=>document.addEventListener("click",B)),q(()=>{document.removeEventListener("click",B),f.value&&clearTimeout(f.value)}),O(()=>a.results,()=>s.value=-1),(e,d)=>(l(),o("div",{ref_key:"searchRef",ref:k,class:"relative"},[v("div",Y,[v("div",ee,[g(M,{class:p(F.value)},null,8,["class"])]),v("input",{ref_key:"inputRef",ref:w,value:t.modelValue,placeholder:t.placeholder,disabled:t.disabled,class:p(_.value),onInput:N,onFocus:T,onBlur:D,onKeydown:I},null,42,te),t.modelValue||t.loading?(l(),o("div",ae,[!t.loading&&t.clearable?(l(),o("button",{key:0,class:"ui-text hover:text-(--ui-text) transition-colors p-1 rounded-full hover:bg-(--ui-surface)","aria-label":t.clearLabel,onClick:E},[g(S,{class:"w-4 h-4"})],8,se)):t.loading?(l(),o("div",le,[g(L,{class:"w-4 h-4 ui-text"})])):u("",!0)])):u("",!0)]),g(W,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95 translate-y-1","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 translate-y-1"},{default:X(()=>[n.value&&(t.results.length>0||t.showNoResults)?(l(),o("div",{key:0,class:p(j.value)},[t.results.length>0?(l(),o("div",oe,[(l(!0),o(Z,null,G(t.results,(r,m)=>(l(),o("button",{key:r.id||m,class:p(H(m)),onClick:K=>C(r,m),onMouseenter:K=>s.value=m},[r.icon?(l(),J(P(r.icon),{key:0,class:"w-4 h-4 mr-3 shrink-0"})):u("",!0),v("div",re,[v("div",ue,b(V(r.title)),1),r.description?(l(),o("div",ie,b(V(r.description)),1)):u("",!0)]),r.category?(l(),o("div",ce,b(r.category),1)):u("",!0)],42,ne))),128))])):t.showNoResults?(l(),o("div",de,b(t.noResultsText),1)):u("",!0),e.$slots.footer?(l(),o("div",fe,[Q(e.$slots,"footer")])):u("",!0)],2)):u("",!0)]),_:3})],512))}};export{ve as default};
