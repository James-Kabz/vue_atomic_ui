import{e as v,l as U,M as A,N as L,c as n,o as c,g,n as q,a as t,h,i as x,q as F,t as f,F as k,b as z,$ as G}from"./index-GxWqBnN7.js";import K from"./CircularProgress-H7K5QmDJ.js";const P={class:"ui-surface-strong w-full"},W=["multiple","accept"],H={class:"ui-surface-strong flex items-center justify-center px-4 py-3"},J={class:"rounded-full p-2 mr-3"},Q={class:"flex flex-col"},R={class:"text-xs ui-text"},X={key:0,class:"ml-2"},Y={key:1,class:"mt-4 space-y-2"},Z={class:"flex items-center space-x-3"},I={class:"flex flex-col"},ee={class:"text-sm font-medium ui-text"},se={class:"text-xs ui-text"},te={class:"flex items-center space-x-3"},ae={class:"ui-success-soft rounded-md p-2"},re={class:"flex flex-col"},ie={class:"text-sm font-medium ui-text"},oe={class:"text-xs ui-text"},le=["onClick"],de={__name:"FileUpload",props:{multiple:Boolean,accept:String,maxSize:Number,maxFiles:Number,variant:{type:String,default:"default",validator:o=>["default","dashed"].includes(o)}},emits:["files-selected","file-removed"],setup(o,{emit:D}){const l=o,p=D,a=v([]),u=v(!1),_=v(null),d=v([]),S=L("border-2 border-dashed rounded-xl cursor-pointer transition-all duration-300 ease-in-out shadow-sm",{variants:{variant:{default:"ui-border-strong  hover:border-(--ui-border-strong) hover:bg-(--ui-surface) focus-within:ring-2 focus-within:ring-(--ui-primary)",dashed:"border-(--ui-primary-soft) hover:border-(--ui-primary-soft) hover:bg-(--ui-primary-soft) focus-within:ring-2 focus-within:ring-(--ui-primary)"}}}),B=U(()=>A(S({variant:l.variant}),{"border-(--ui-success) ui-success-soft shadow-md":a.value.length>0&&!u.value,"border-(--ui-primary) ui-primary-soft ring-4 ring-(--ui-primary) shadow-lg":u.value,"border-(--ui-success) ui-success-soft ring-4 ring-(--ui-success) shadow-lg":a.value.length>0&&u.value})),C=s=>{s.preventDefault(),u.value=!1;const r=Array.from(s.dataTransfer.files);y(r)},M=s=>{s.preventDefault()},N=s=>{s.preventDefault(),u.value=!0},$=s=>{s.preventDefault(),u.value=!1},V=()=>{_.value?.click()},j=s=>{const r=Array.from(s.target.files);y(r)},y=s=>{const r=s.filter(e=>!(l.maxSize&&e.size>l.maxSize));if(r.length===0)return;if(l.maxFiles){const e=a.value.length+d.value.length;if(e>=l.maxFiles)return;const m=l.maxFiles-e;r.splice(m)}const i=r.map(e=>G({file:e,progress:0,uploading:!0}));d.value.push(...i),i.forEach(e=>{const m=2e3+Math.random()*2e3,w=50,O=100/(m/w),T=setInterval(()=>{e.progress+=O,e.progress>=100&&(e.progress=100,e.uploading=!1,clearInterval(T),l.multiple?(a.value.push(e.file),p("files-selected",a.value)):(a.value=[e.file],p("files-selected",e.file)),d.value.splice(d.value.indexOf(e),1))},w)})},E=s=>{a.value.splice(s,1),l.multiple?p("file-removed",a.value):p("file-removed",a.value.length>0?a.value[0]:null)},b=s=>{if(s===0)return"0 Bytes";const r=1024,i=["Bytes","KB","MB","GB"],e=Math.floor(Math.log(s)/Math.log(r));return parseFloat((s/Math.pow(r,e)).toFixed(2))+" "+i[e]};return(s,r)=>(c(),n("div",P,[!a.value.length||o.multiple?(c(),n("div",{key:0,class:q(B.value),onDrop:C,onDragover:M,onDragenter:N,onDragleave:$,onClick:V},[t("input",{ref_key:"fileInput",ref:_,type:"file",multiple:o.multiple,accept:o.accept,class:"hidden",onChange:j},null,40,W),t("div",H,[t("div",J,[h(x,{icon:"upload",class:"h-6 w-6 ui-text"})]),t("div",Q,[r[0]||(r[0]=t("p",{class:"text-sm font-medium ui-text"},[t("span",{class:"ui-primary font-semibold"},"Click to upload"),F(" or drag and drop ")],-1)),t("p",R,[F(f(o.maxSize?`Up to ${b(o.maxSize)}`:"No size limit")+" ",1),o.accept?(c(),n("span",X,"â€¢ "+f(o.accept),1)):g("",!0)])])])],34)):g("",!0),a.value.length>0||d.value.length>0?(c(),n("div",Y,[(c(!0),n(k,null,z(d.value,(i,e)=>(c(),n("div",{key:`uploading-${e}`,class:"flex items-center justify-between p-3 ui-surface border ui-border-strong rounded-lg shadow-sm"},[t("div",Z,[h(K,{value:i.progress,max:100,size:"sm",variant:"default","dynamic-color":!0,class:"shrink-0"},null,8,["value"]),t("div",I,[t("span",ee,f(i.file.name),1),t("span",se,"Uploading... "+f(Math.round(i.progress))+"%",1)])])]))),128)),(c(!0),n(k,null,z(a.value,(i,e)=>(c(),n("div",{key:`uploaded-${e}`,class:"flex items-center justify-between p-3 ui-surface border ui-border-strong rounded-lg shadow-sm hover:shadow-md transition-shadow"},[t("div",te,[t("div",ae,[h(x,{icon:"file",class:"h-5 w-5 ui-success"})]),t("div",re,[t("span",ie,f(i.name),1),t("span",oe,f(b(i.size)),1)])]),t("button",{class:"ui-text hover:text-(--ui-danger) hover:bg-(--ui-danger-soft) rounded-full p-1 transition-colors",onClick:m=>E(e)},[h(x,{icon:"x",class:"h-4 w-4"})],8,le)]))),128))])):g("",!0)]))}};export{de as default};
