import{f as m,k as x,g as te,x as ae,O as ne,c as u,o as s,a as r,d as re,q as k,n as R,K as W,h as oe,w as ie,C as le,t as w,F as M,b as S,T as se,W as ue,Y as de}from"./index-swU1CFca.js";const ce={class:"relative w-full bg-(--ui-surface) rounded-md"},fe={class:"relative"},ve=["id","value","disabled","placeholder","required","aria-describedby"],ge={class:"flex items-center justify-between mb-3"},me={class:"text-sm font-semibold ui-text"},pe={class:"grid grid-cols-7 gap-1 mb-1"},ye={class:"grid grid-cols-7 gap-1"},be=["disabled","onClick"],he={key:0,class:"mt-3 pt-2 border-t ui-border"},we={__name:"DatePicker",props:{id:String,modelValue:[String,Date],disabled:Boolean,required:Boolean,min:[String,Date],max:[String,Date],placeholder:{type:String,default:"Select date"},format:{type:String,default:"MM/DD/YYYY"},clearable:{type:Boolean,default:!0},showToday:{type:Boolean,default:!0},ariaDescribedby:String,customValidation:{type:Function,default:null},disabledDates:{type:[Array,Function],default:null}},emits:["update:modelValue","validation-error"],setup(d,{emit:H}){const o=d,p=H,c=m(!1),Y=m(null),B=m({}),f=new Date,i=m(f.getMonth()),l=m(f.getFullYear()),v=m(null),y=m(!1),O=["Su","Mo","Tu","We","Th","Fr","Sa"],P=x(()=>new Date(l.value,i.value).toLocaleString("default",{month:"long"})),T=x(()=>new Date(l.value,i.value+1,0).getDate()),_=x(()=>new Date(l.value,i.value,1).getDay()),F=x(()=>{const a=new Date(l.value,i.value,0).getDate(),e=_.value;return Array.from({length:e},(t,n)=>a-e+n+1)}),K=x(()=>{const a=F.value.length+T.value,e=a%7===0?0:7-a%7;return Array.from({length:e},(t,n)=>n+1)}),E=x(()=>v.value?U(v.value):"");function U(a){if(!a)return"";const e=new Date(a),t=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),g=e.getFullYear();return o.format.replace("MM",t).replace("DD",n).replace("YYYY",g)}function D(a){if(!a)return null;if(a instanceof Date)return a;if(typeof a=="string"){const t=a.split("-");if(t.length===3){const n=parseInt(t[0],10),g=parseInt(t[1],10)-1,b=parseInt(t[2],10);return new Date(n,g,b)}}const e=new Date(a);return isNaN(e.getTime())?null:e}function G(a){return f.getDate()===a&&f.getMonth()===i.value&&f.getFullYear()===l.value}function z(a){if(!v.value)return!1;const e=new Date(v.value);return e.getDate()===a&&e.getMonth()===i.value&&e.getFullYear()===l.value}function C(a){const e=new Date(l.value,i.value,a);if(o.min){const t=D(o.min);if(t&&e<t)return!0}if(o.max){const t=D(o.max);if(t&&e>t)return!0}if(o.disabledDates){if(typeof o.disabledDates=="function")return o.disabledDates(e);if(Array.isArray(o.disabledDates))return o.disabledDates.some(t=>{const n=D(t);return n&&n.getTime()===e.getTime()})}return!!(o.customValidation&&o.customValidation(e))}function L(a){if(!a)return y.value=!1,p("validation-error",null),!0;if(o.customValidation){const e=o.customValidation(a);if(e)return y.value=!0,p("validation-error",e),!1}return y.value=!1,p("validation-error",null),!0}async function N(){await de();const a=document.getElementById(o.id);if(!a||!Y.value)return;const e=a.getBoundingClientRect(),t=320,n=window.innerHeight-e.bottom,g=e.top,b=8;let V,h;n>=t||n>g?V=e.bottom+b:V=e.top-t-b,h=e.left;const I=256;h+I>window.innerWidth&&(h=window.innerWidth-I-16),h<16&&(h=16),B.value={top:`${V}px`,left:`${h}px`}}async function J(){o.disabled||(c.value=!c.value,c.value&&await N())}function A(){c.value=!1}function Q(){i.value===0?(i.value=11,l.value--):i.value--}function X(){i.value===11?(i.value=0,l.value++):i.value++}function $(a){if(C(a))return;const e=new Date(l.value,i.value,a);if(!L(e))return;v.value=e;const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),g=String(e.getDate()).padStart(2,"0"),b=`${t}-${n}-${g}`;p("update:modelValue",b),setTimeout(()=>{c.value=!1},150)}function Z(){i.value=f.getMonth(),l.value=f.getFullYear(),$(f.getDate())}function ee(){v.value=null,y.value=!1,p("update:modelValue",""),p("validation-error",null)}te(()=>o.modelValue,a=>{if(a){const e=D(a);e&&(v.value=e,i.value=e.getMonth(),l.value=e.getFullYear(),L(e))}else v.value=null,y.value=!1},{immediate:!0});function j(){c.value&&N()}function q(a){a.key==="Escape"&&c.value&&A()}return ae(()=>{document.addEventListener("keydown",q),window.addEventListener("resize",j)}),ne(()=>{document.removeEventListener("keydown",q),window.removeEventListener("resize",j)}),(a,e)=>(s(),u("div",ce,[r("div",fe,[r("input",{id:d.id,type:"text",value:E.value,readonly:"",disabled:d.disabled,placeholder:d.placeholder,required:d.required,"aria-describedby":d.ariaDescribedby,class:R(["w-full px-3 py-2 pr-10 border rounded-md ui-surface ui-text placeholder-slate-400 text-sm  ","focus:outline-none focus:ring-2 focus:ring-(--ui-primary) focus:border-(--ui-primary) cursor-pointer transition-colors","disabled:bg-(----ui-bg) disabled:text-(--ui-text) disabled:cursor-not-allowed",y.value?"border-(--ui-danger) focus:ring-(--ui-danger) focus:border-(--ui-danger)":"ui-border"]),onClick:J},null,10,ve),e[2]||(e[2]=r("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[r("svg",{class:"w-4 h-4 ui-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),d.clearable&&E.value&&!d.disabled?(s(),u("button",{key:0,type:"button",class:"absolute right-9 top-1/2 -translate-y-1/2 p-1 hover:bg-(----ui-bg) rounded transition-colors","aria-label":"Clear date",onClick:W(ee,["stop"])},[...e[1]||(e[1]=[r("svg",{class:"w-3.5 h-3.5 ui-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):k("",!0)]),(s(),re(ue,{to:"body"},[oe(se,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:ie(()=>[c.value?(s(),u("div",{key:0,ref_key:"calendarRef",ref:Y,style:le(B.value),class:"fixed z-10000 rounded-lg shadow-xl p-3 w-64 ui-surface ui-border-strong",onClick:e[0]||(e[0]=W(()=>{},["stop"]))},[r("div",ge,[r("button",{type:"button",class:"p-1.5 rounded hover:bg-(----ui-bg) transition-colors","aria-label":"Previous Month",onClick:Q},[...e[3]||(e[3]=[r("svg",{class:"w-4 h-4 ui-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 18l-6-6 6-6"})],-1)])]),r("div",me,w(P.value)+" "+w(l.value),1),r("button",{type:"button",class:"p-1.5 rounded hover:bg-(----ui-bg) transition-colors","aria-label":"Next Month",onClick:X},[...e[4]||(e[4]=[r("svg",{class:"w-4 h-4 ui-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 18l6-6-6-6"})],-1)])])]),r("div",pe,[(s(),u(M,null,S(O,t=>r("div",{key:t,class:"text-center text-xs font-medium ui-text py-1"},w(t),1)),64))]),r("div",ye,[(s(!0),u(M,null,S(F.value,(t,n)=>(s(),u("div",{key:"prev-"+n,class:"text-center text-xs ui-text py-1.5"},w(t),1))),128)),(s(!0),u(M,null,S(T.value,t=>(s(),u("button",{key:t,type:"button",disabled:C(t),class:R(["w-8 h-8 rounded text-xs font-medium transition-colors",G(t)&&!z(t)?"ui-primary-soft ui-primary ring-1 ring-(--ui-primary)":"",z(t)?"ui-primary-bg ui-text hover:bg-(--ui-primary)":"ui-text hover:bg-(----ui-bg)",C(t)?"ui-text cursor-not-allowed hover:bg-transparent line-through":"cursor-pointer"]),onClick:n=>$(t)},w(t),11,be))),128)),(s(!0),u(M,null,S(K.value,(t,n)=>(s(),u("div",{key:"next-"+n,class:"text-center text-xs ui-text py-1.5"},w(t),1))),128))]),d.showToday?(s(),u("div",he,[r("button",{type:"button",class:"w-full px-3 py-1.5 text-xs font-medium ui-primary hover:bg-(--ui-primary-soft) rounded transition-colors",onClick:Z}," Today ")])):k("",!0)],4)):k("",!0)]),_:1}),c.value?(s(),u("div",{key:0,class:"fixed inset-0 z-9999",onClick:A})):k("",!0)]))]))}};export{we as default};
