import{e as p,l as f,f as W,y as $,P as G,c as o,o as s,a as n,h as J,g as y,L as V,w as K,n as T,t as m,F as b,b as h,T as Q}from"./index-GxWqBnN7.js";const R={class:"relative w-full"},X={class:"relative"},Z=["id","value","disabled","placeholder","required","aria-describedby"],_={class:"flex items-center justify-between mb-3"},ee={class:"text-sm font-medium"},te={class:"grid grid-cols-7 gap-1 mb-2"},ae={class:"grid grid-cols-7 gap-1"},ne=["disabled","onClick"],le={key:0,class:"mt-4 pt-3 border-t ui-border-strong"},oe={__name:"Calendar",props:{id:String,modelValue:[String,Date],disabled:Boolean,required:Boolean,min:[String,Date],max:[String,Date],placeholder:{type:String,default:"Select date"},format:{type:String,default:"MM/DD/YYYY"},clearable:{type:Boolean,default:!0},showToday:{type:Boolean,default:!0},calendarPosition:{type:String,default:"left-0"},ariaDescribedby:String},emits:["update:modelValue"],setup(i,{emit:F}){const c=i,k=F,v=p(!1),g=new Date,l=p(g.getMonth()),r=p(g.getFullYear()),d=p(null),N=["Su","Mo","Tu","We","Th","Fr","Sa"],j=f(()=>new Date(r.value,l.value).toLocaleString("default",{month:"long"})),w=f(()=>new Date(r.value,l.value+1,0).getDate()),L=f(()=>new Date(r.value,l.value,1).getDay()),M=f(()=>{const t=new Date(r.value,l.value,0).getDate(),e=L.value;return Array.from({length:e},(a,u)=>t-e+u+1)}),E=f(()=>{const t=M.value.length+w.value,e=t%7===0?0:7-t%7;return Array.from({length:e},(a,u)=>u+1)}),C=f(()=>d.value?q(d.value):"");function q(t){if(!t)return"";const e=new Date(t),a=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0"),U=e.getFullYear();return c.format.replace("MM",a).replace("DD",u).replace("YYYY",U)}function x(t){if(!t)return null;if(t instanceof Date)return t;const e=new Date(t);return isNaN(e.getTime())?null:e}function z(t){if(!d.value)return!1;const e=new Date(d.value);return e.getDate()===t&&e.getMonth()===l.value&&e.getFullYear()===r.value}function D(t){const e=new Date(r.value,l.value,t);if(c.min){const a=x(c.min);if(a&&e<a)return!0}if(c.max){const a=x(c.max);if(a&&e>a)return!0}return!1}function P(){c.disabled||(v.value=!v.value)}function S(){v.value=!1}function O(){l.value===0?(l.value=11,r.value--):l.value--}function A(){l.value===11?(l.value=0,r.value++):l.value++}function Y(t){if(D(t))return;const e=new Date(r.value,l.value,t);d.value=e,k("update:modelValue",e.toISOString().split("T")[0]),v.value=!1}function I(){l.value=g.getMonth(),r.value=g.getFullYear(),Y(g.getDate())}function H(){d.value=null,k("update:modelValue","")}W(()=>c.modelValue,t=>{if(t){const e=x(t);e&&(d.value=e,l.value=e.getMonth(),r.value=e.getFullYear())}else d.value=null},{immediate:!0});function B(t){t.key==="Escape"&&v.value&&S()}return $(()=>{document.addEventListener("keydown",B)}),G(()=>{document.removeEventListener("keydown",B)}),(t,e)=>(s(),o("div",R,[n("div",X,[n("input",{id:i.id,type:"text",value:C.value,readonly:"",disabled:i.disabled,placeholder:i.placeholder,required:i.required,"aria-describedby":i.ariaDescribedby,class:"w-full px-3 py-2 pr-10 border ui-border-strong rounded-md bg-(----ui-bg) ui-text placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-(--ui-primary) focus:border-(--ui-primary) cursor-pointer disabled:bg-(--ui-surface) disabled:text-(--ui-text) disabled:cursor-not-allowed",onClick:P},null,8,Z),e[2]||(e[2]=n("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"},[n("svg",{class:"w-5 h-5 ui-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),i.clearable&&C.value&&!i.disabled?(s(),o("button",{key:0,type:"button",class:"absolute right-9 top-1/2 -translate-y-1/2 p-1 hover:bg-(--ui-surface) rounded","aria-label":"Clear date",onClick:V(H,["stop"])},[...e[1]||(e[1]=[n("svg",{class:"w-4 h-4 ui-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):y("",!0)]),J(Q,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:K(()=>[v.value?(s(),o("div",{key:0,class:T(["absolute z-99999 mt-2 rounded-lg shadow-lg p-4 ui-surface",i.calendarPosition]),onClick:e[0]||(e[0]=V(()=>{},["stop"]))},[n("div",_,[n("button",{type:"button",class:"p-1 hover:bg-(--ui-surface) rounded","aria-label":"Previous Month",onClick:O},[...e[3]||(e[3]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 18l-6-6 6-6"})],-1)])]),n("div",ee,m(j.value)+" "+m(r.value),1),n("button",{type:"button",class:"p-1 hover:bg-(--ui-surface) rounded","aria-label":"Next Month",onClick:A},[...e[4]||(e[4]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 18l6-6-6-6"})],-1)])])]),n("div",te,[(s(),o(b,null,h(N,a=>n("div",{key:a,class:"text-center text-xs font-medium ui-text py-1"},m(a),1)),64))]),n("div",ae,[(s(!0),o(b,null,h(M.value,(a,u)=>(s(),o("div",{key:"prev-"+u,class:"text-center text-sm ui-text py-2"},m(a),1))),128)),(s(!0),o(b,null,h(w.value,a=>(s(),o("button",{key:a,type:"button",disabled:D(a),class:T(["w-8 h-8 text-sm rounded flex items-center justify-center",z(a)?"ui-primary-bg ui-text":"hover:bg-(--ui-surface)",D(a)?"ui-text cursor-not-allowed":""]),onClick:u=>Y(a)},m(a),11,ne))),128)),(s(!0),o(b,null,h(E.value,(a,u)=>(s(),o("div",{key:"next-"+u,class:"text-center text-sm ui-text py-2"},m(a),1))),128))]),i.showToday?(s(),o("div",le,[n("button",{type:"button",class:"w-full px-3 py-2 text-sm font-medium ui-primary hover:bg-(--ui-primary-soft) rounded-lg transition-colors",onClick:I}," Today ")])):y("",!0)],2)):y("",!0)]),_:1}),v.value?(s(),o("div",{key:0,class:"fixed inset-0 z-99998",onClick:S})):y("",!0)]))}};export{oe as default};
