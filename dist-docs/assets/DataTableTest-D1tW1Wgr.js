import{e as l,l as k,c as T,a as i,g as re,h as D,w as p,n as S,t as f,r as ue,o as j,J as ce,K as de,q as B}from"./index-GxWqBnN7.js";import me from"./DataTableFilters-Dq4oXZan.js";import ve from"./DataTableToolBar-BUcT5K2G.js";import pe from"./DataTable-Dz98ePwJ.js";import"./Button-BeNwfNW8.js";import"./FileUpload-9nsheD6L.js";import"./CircularProgress-H7K5QmDJ.js";import"./Checkbox-I7i784PT.js";import"./DataTableHeader-BeOTCZSQ.js";import"./Typography-Dbut3QiO.js";import"./DataTableRow-Cv90MCtO.js";import"./DataTableCell-DA_zjLZ3.js";import"./DataTablePagination-ox8GyMEE.js";import"./Label-DhE62FJ2.js";import"./Loader-BXlGcE_d.js";import"./Tooltip-ypiwBQLb.js";import"./Modal-CINFEKg1.js";const fe={id:"app",class:"min-h-screen bg-(--ui-bg)"},ge={class:"container mx-auto py-8"},he={class:"rounded-lg shadow-sm border ui-border-strong overflow-hidden"},be=["disabled"],ye={class:"flex items-center"},we=["src","alt"],xe={class:"font-medium ui-text"},ke={class:"text-xs ui-text"},De={class:"flex items-center gap-1"},Ce={class:"font-mono ui-success"},Ae={class:"text-sm ui-text"},qe={__name:"DataTableTest",props:{currentOrganisation:{type:Object,default:null}},setup(F){const U=F,g=l({id:1,role:"admin",permissions:["users.view","users.edit","users.delete","users.activate"]}),c=e=>g.value.permissions.includes(e),M=k(()=>({label:"Add User",icon:"plus",size:"lg",tooltip:"Create new user",permission:()=>c("users.create"),onClick:()=>L()})),V=k(()=>[{key:"view",icon:"eye",variant:"primary",tooltip:"View user details",permission:()=>c("users.view")},{key:"edit",icon:"pen",variant:"secondary",tooltip:"Edit user",permission:e=>c("users.edit")?g.value.role==="admin"?!0:e.role!=="Admin":!1,disabled:e=>e.id===g.value.id},{key:"delete",icon:"trash",variant:"danger",tooltip:"Delete user",permission:e=>!(!c("users.delete")||e.role==="Admin"||e.id===g.value.id),visible:e=>e.role!=="Admin"},{key:"activate",icon:"check",variant:"success",tooltip:"Activate user",visible:e=>e.status==="inactive",permission:()=>c("users.activate")},{key:"deactivate",icon:"times",variant:"warning",tooltip:"Deactivate user test. blah",visible:e=>e.status==="active",permission:()=>c("users.activate"),disabled:e=>e.id===g.value.id}]),r=l([{id:1,name:"John Doe",email:"john@example.com",role:"Admin",department:"Engineering",status:"active",lastLogin:new Date("2024-01-15"),avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face&auto=format",salary:75e3,joinDate:"2023-03-15",organisation_id:1},{id:2,name:"Jane Smith",email:"jane@example.com",role:"Editor",department:"Marketing",status:"active",lastLogin:new Date("2024-01-14"),avatar:"https://images.unsplash.com/photo-1494790108755-2616b332c3c7?w=32&h=32&fit=crop&crop=face&auto=format",salary:65e3,joinDate:"2023-05-22",organisation_id:1},{id:3,name:"Mike Johnson",email:"mike@example.com",role:"Viewer",department:"Sales",status:"inactive",lastLogin:new Date("2024-01-10"),avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=32&h=32&fit=crop&crop=face&auto=format",salary:55e3,joinDate:"2023-07-08",organisation_id:2},{id:4,name:"Sarah Wilson",email:"sarah@example.com",role:"Editor",department:"Design",status:"active",lastLogin:new Date("2024-01-16"),avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=32&h=32&fit=crop&crop=face&auto=format",salary:7e4,joinDate:"2023-02-14",organisation_id:2},{id:5,name:"Alex Chen",email:"alex@example.com",role:"Admin",department:"Engineering",status:"active",lastLogin:new Date("2024-01-17"),avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=32&h=32&fit=crop&crop=face&auto=format",salary:8e4,joinDate:"2023-01-10",organisation_id:1},{id:6,name:"Maria Garcia",email:"maria@example.com",role:"Editor",department:"Marketing",status:"inactive",lastLogin:new Date("2024-01-05"),avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=32&h=32&fit=crop&crop=face&auto=format",salary:62e3,joinDate:"2023-06-20",organisation_id:2}]),h=l(""),C=l(""),b=l(""),d=l(""),m=l(""),u=l([]),R=l(10),A=l("normal"),_=l(!1),y=l(""),E=l(""),w=[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",sortable:!0},{key:"department",label:"Department",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"lastLogin",label:"Last Login",sortable:!0},{key:"salary",label:"Salary",sortable:!0}],v=l(["name","email","role","department","status","salary"]),I=k(()=>w.filter(e=>v.value.includes(e.key))),N=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],z=[{key:"activate",label:"Activate Users",variant:"primary",icon:["fas","check"]},{key:"deactivate",label:"Deactivate Users",variant:"secondary",icon:["fas","times"]},{key:"delete",label:"Delete Users",variant:"danger",icon:["fas","trash"]}],x=k(()=>{let e=r.value;if(U.currentOrganisation)e=e.filter(t=>t.organisation_id===U.currentOrganisation.org_id);else return[];if(h.value.trim()){const t=h.value.toLowerCase();e=e.filter(s=>s.name.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||s.role.toLowerCase().includes(t)||s.department.toLowerCase().includes(t))}return C.value&&(e=e.filter(t=>t.status===C.value)),b.value&&(e=e.filter(t=>t.department===b.value)),(d.value||m.value)&&(e=e.filter(t=>{const s=new Date(t.joinDate),a=d.value?new Date(d.value):null,n=m.value?new Date(m.value):null;return a&&n?s>=a&&s<=n:a?s>=a:n?s<=n:!0})),e}),o=(e,t="success")=>{y.value=e,E.value=t==="success"?"ui-success-soft ui-success border border-(--ui-success-soft)":"ui-danger-soft ui-danger border border-(--ui-danger-soft)",setTimeout(()=>{y.value=""},3e3)},O=e=>{const t="inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full";switch(e){case"active":return`${t} ui-success-soft ui-success`;case"inactive":return`${t} ui-danger-soft ui-danger`;default:return`${t} ui-surface-muted ui-text`}},q=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),J=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)),P=e=>{e.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent("User")}&background=e2e8f0&color=64748b&size=32`},Q=e=>{console.log("Sort changed:",e),o(`Sorted by ${e.column} ${e.direction}`)},G=e=>{console.log("Row clicked:",e),o(`Clicked on ${e.item.name}`)},H=()=>{console.log("Export clicked - exporting",x.value.length,"users"),o(`Exporting ${x.value.length} users...`)},K=e=>{console.log("Add button clicked:",e)},L=()=>{console.log("Add user clicked"),o("Add user dialog would open here")},W=e=>{console.log("Bulk action:",e);const{action:t,items:s}=e;switch(t){case"activate":s.forEach(a=>{const n=r.value.findIndex($=>$.id===a.id);n!==-1&&(r.value[n].status="active")}),o(`Activated ${s.length} users`),u.value=[];break;case"deactivate":s.forEach(a=>{const n=r.value.findIndex($=>$.id===a.id);n!==-1&&(r.value[n].status="inactive")}),o(`Deactivated ${s.length} users`),u.value=[];break;case"delete":if(confirm(`Are you sure you want to delete ${s.length} users?`)){const a=s.map(n=>n.id);r.value=r.value.filter(n=>!a.includes(n.id)),o(`Deleted ${s.length} users`),u.value=[]}break;default:o(`Performed ${t} on ${s.length} users`)}},X=e=>{A.value=e,o(`Changed density to ${e}`)},Y=e=>{const{column:t,visible:s}=e;s?v.value.includes(t)||(v.value.push(t),o(`Showed column: ${w.find(a=>a.key===t)?.label}`)):(v.value=v.value.filter(a=>a!==t),o(`Hidden column: ${w.find(a=>a.key===t)?.label}`))},Z=()=>{_.value=!0,o("Refreshing data..."),setTimeout(()=>{_.value=!1,o("Data refreshed successfully!")},2e3)},ee=()=>{u.value.length!==0&&(console.log("Bulk export selected users:",u.value),o(`Exporting ${u.value.length} selected users...`))},te=()=>{h.value="",C.value="",b.value="",d.value="",m.value="",o("All filters cleared")},ae=({action:e,item:t})=>{switch(console.log("Action triggered:",e,t),e){case"view":se(t);break;case"edit":oe(t);break;case"delete":ie(t);break;case"activate":ne(t);break;case"deactivate":le(t);break;default:console.warn("Unknown action:",e)}},se=e=>{console.log("View user:",e),o(`Viewing details for ${e.name}`)},oe=e=>{console.log("Edit user:",e),o(`Editing ${e.name}`)},ie=e=>{if(console.log("Delete user:",e),confirm(`Are you sure you want to delete ${e.name}?`)){const t=r.value.findIndex(s=>s.id===e.id);t>-1&&(r.value.splice(t,1),o(`Deleted ${e.name}`),u.value=u.value.filter(s=>s.id!==e.id))}},ne=e=>{console.log("Activate user:",e);const t=r.value.findIndex(s=>s.id===e.id);t!==-1&&(r.value[t].status="active",o(`Activated ${e.name}`))},le=e=>{console.log("Deactivate user:",e);const t=r.value.findIndex(s=>s.id===e.id);t!==-1&&(r.value[t].status="inactive",o(`Deactivated ${e.name}`))};return(e,t)=>{const s=ue("font-awesome-icon");return j(),T("div",fe,[i("div",ge,[t[7]||(t[7]=i("h1",{class:"text-3xl font-bold ui-text mb-8"}," Vue DataTable with Filters ",-1)),i("div",he,[D(me,{"search-query":h.value,"onUpdate:searchQuery":t[1]||(t[1]=a=>h.value=a),"date-from":d.value,"onUpdate:dateFrom":t[2]||(t[2]=a=>d.value=a),"date-to":m.value,"onUpdate:dateTo":t[3]||(t[3]=a=>m.value=a),"status-options":N,"show-file-upload":!0,"show-date-filter":!0,"show-export":!0,"show-add":!0,"search-placeholder":"Search users...","add-button":M.value,onExport:H,onAdd:L,onAddButtonClick:K,onClearFilters:te},{filters:p(()=>[ce(i("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a),class:"px-3 py-2 border ui-border-strong rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-(--ui-primary)"},[...t[5]||(t[5]=[i("option",{value:""}," All Departments ",-1),i("option",{value:"Engineering"}," Engineering ",-1),i("option",{value:"Marketing"}," Marketing ",-1),i("option",{value:"Sales"}," Sales ",-1),i("option",{value:"Design"}," Design ",-1)])],512),[[de,b.value]])]),_:1},8,["search-query","date-from","date-to","add-button"]),D(ve,{"selected-items":u.value,"total-items":x.value.length,"bulk-actions":z,density:A.value,"toggleable-columns":w,"visible-columns":v.value,"is-refreshing":_.value,"show-density-toggle":!0,"show-column-toggle":!0,"show-refresh":!0,onBulkAction:W,"onUpdate:density":X,onToggleColumn:Y,onRefresh:Z},{actions:p(()=>[i("button",{disabled:u.value.length===0,class:"px-3 py-2 text-sm ui-text hover:text-(--ui-text) border ui-border-strong rounded-md hover:bg-(--ui-surface) flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:ee},[D(s,{icon:"download"}),t[6]||(t[6]=B(" Export Selected ",-1))],8,be)]),_:1},8,["selected-items","total-items","density","visible-columns","is-refreshing"]),D(pe,{data:x.value,columns:I.value,selectable:!0,"selected-items":u.value,striped:!0,hoverable:!0,"clickable-rows":!0,"page-size":R.value,"show-pagination":!0,density:A.value,actions:V.value,"empty-text":"No users found",onSelectionChange:t[4]||(t[4]=a=>u.value=a),onSortChange:Q,onRowClick:G,onAction:ae},{"cell-name":p(({item:a})=>[i("div",ye,[i("img",{src:a.avatar,alt:a.name,class:"w-8 h-8 rounded-full mr-3",onError:P},null,40,we),i("div",null,[i("div",xe,f(a.name),1),i("div",ke," ID: "+f(a.id),1)])])]),"cell-status":p(({value:a})=>[i("span",{class:S(O(a))},[i("span",De,[i("span",{class:S(["w-2 h-2 rounded-full",a==="active"?"ui-success-bg":"ui-danger-bg"])},null,2),B(" "+f(a),1)])],2)]),"cell-salary":p(({value:a})=>[i("span",Ce,f(q(a)),1)]),"cell-lastLogin":p(({value:a})=>[i("span",Ae,f(J(a)),1)]),_:1},8,["data","columns","selected-items","page-size","density","actions"])]),y.value?(j(),T("div",{key:0,class:S(["mt-4 p-4 rounded-lg",E.value])},f(y.value),3)):re("",!0)])])}}};export{qe as default};
