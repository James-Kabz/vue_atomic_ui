import{e as p,l as O,y as T,U as I,f as k,c as n,o as a,a as d,d as V,t as w,F as L,b as C,w as E,q as M,n as m,h as N,g as D,E as q,J as H,L as K,O as R,T as U,X as A,Z as F}from"./index-GxWqBnN7.js";import J from"./Badge-BY8LT_W2.js";const P={class:"relative"},Q=["id","disabled"],X={key:0,class:"ui-text"},Z={key:1,class:"flex flex-wrap gap-1.5"},j={class:"px-3 py-2.5 border-b ui-border-strong ui-surface-muted"},G={key:0,class:"max-h-52 overflow-y-auto py-1"},W=["onClick"],Y={class:"flex items-center gap-3"},ee=["checked"],te={key:1,class:"px-4 py-6 text-sm ui-text text-center"},ae={__name:"MultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,required:!0,validator:s=>s.every(v=>v.value!==void 0&&v.label)},id:{type:String,default:null},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Select options"},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:v}){const l=s,_=v,r=p(!1),u=p(""),b=p(null),i=p([...l.options]),f=p(null),y=p({}),g=O(()=>l.options.filter(e=>l.modelValue.includes(e.value)).map(e=>e.label)),c=()=>{if(!f.value)return;const e=f.value.getBoundingClientRect(),t=window.innerHeight,o=t-e.bottom,h=320;o<h&&e.top>h?y.value={position:"fixed",bottom:`${t-e.top+4}px`,left:`${e.left}px`,width:`${e.width}px`,zIndex:9999}:y.value={position:"fixed",top:`${e.bottom+4}px`,left:`${e.left}px`,width:`${e.width}px`,zIndex:9999}},B=()=>{l.disabled||(r.value=!r.value,r.value?(c(),F(()=>{b.value?.focus()})):(u.value="",i.value=[...l.options]))},S=e=>{let t;l.modelValue.includes(e)?t=l.modelValue.filter(o=>o!==e):t=[...l.modelValue,e],_("update:modelValue",t)},z=()=>{if(!u.value.trim())i.value=[...l.options];else{const e=u.value.toLowerCase();i.value=l.options.filter(t=>t.label.toLowerCase().includes(e))}},$=e=>{e.key==="Escape"&&(r.value=!1,u.value="",i.value=[...l.options])},x=e=>{if(!f.value)return;const t=e.target;t&&!f.value.contains(t)&&!t.closest("[data-multiselect-dropdown]")&&(r.value=!1,u.value="",i.value=[...l.options])};return T(()=>{document.addEventListener("click",x),window.addEventListener("scroll",c,!0),window.addEventListener("resize",c)}),I(()=>{document.removeEventListener("click",x),window.removeEventListener("scroll",c,!0),window.removeEventListener("resize",c)}),k(()=>l.options,e=>{i.value=[...e]},{immediate:!0}),k(r,e=>{e&&c()}),(e,t)=>(a(),n("div",P,[d("button",{id:s.id,ref_key:"buttonRef",ref:f,type:"button",disabled:s.disabled,class:m(["w-full px-3 py-2.5 text-left border rounded-md focus:outline-none focus:ring-2 focus:ring-(--ui-primary) ui-surface  min-h-[42px]",s.hasError?"border-(--ui-danger)":"ui-border-strong ",s.disabled?"ui-surface-muted cursor-not-allowed opacity-50":"hover:border-(--ui-border-strong)"]),onClick:B,onKeydown:$},[g.value.length===0?(a(),n("div",X,w(s.placeholder||"Select options"),1)):(a(),n("div",Z,[(a(!0),n(L,null,C(g.value,o=>(a(),V(J,{key:o,variant:"primary",size:"sm"},{default:E(()=>[M(w(o),1)]),_:2},1024))),128))])),(a(),n("svg",{class:m(["absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 ui-text pointer-events-none transition-transform duration-200",{"rotate-180":r.value}]),fill:"currentColor",viewBox:"0 0 20 20"},[...t[2]||(t[2]=[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2))],42,Q),(a(),V(A,{to:"body"},[N(U,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:E(()=>[r.value?(a(),n("div",{key:0,style:q(y.value),"data-multiselect-dropdown":"",class:"shadow-lg max-h-72 rounded-md text-base ring-1 ring-(----ui-bg) ring-opacity-5 overflow-hidden focus:outline-none"},[d("div",j,[H(d("input",{ref_key:"searchInput",ref:b,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),type:"text",placeholder:"Search options...",class:"w-full px-3 py-2 text-sm border ui-border-strong rounded-md focus:outline-none focus:ring-2 focus:ring-(--ui-primary) focus:border-transparent ui-surface",onInput:z,onKeydown:t[1]||(t[1]=K(()=>{},["stop"]))},null,544),[[R,u.value]])]),i.value.length>0?(a(),n("div",G,[(a(!0),n(L,null,C(i.value,o=>(a(),n("button",{key:o.value,type:"button",class:m(["cursor-pointer select-none relative py-2.5 pl-3 pr-9 w-full text-left hover:bg-(--ui-primary-soft) focus:bg-(--ui-primary-soft) focus:outline-none transition-colors duration-150",{"ui-primary-soft":s.modelValue.includes(o.value)}]),onClick:h=>S(o.value)},[d("div",Y,[d("input",{type:"checkbox",checked:s.modelValue.includes(o.value),class:"h-4 w-4 ui-primary focus:ring-(--ui-primary) ui-border-strong rounded cursor-pointer pointer-events-none",readonly:"",tabindex:"-1"},null,8,ee),d("span",{class:m(["block font-normal truncate",{"ui-primary font-medium":s.modelValue.includes(o.value)}])},w(o.label),3)])],10,W))),128))])):(a(),n("div",te," No options found "))],4)):D("",!0)]),_:1})]))]))}};export{ae as default};
